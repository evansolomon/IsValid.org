function roundNumber(e,t){var n=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return n}$(document).ready(function(){function e(e){var t=window.location.search.substring(1),n,r,i=t.split("&");for(n=0;n<i.length;n++){r=i[n].split("=");if(r[0]==e)return unescape(r[1])}return null}$("#con_con").focus();$("button").click(function(){var e=$("input#con_con").val(),t=$("input#con_sam").val(),n=$("input#test_con").val(),r=$("input#test_sam").val(),i=$("input#fx").val(),s="conversions_control="+e+"&samples_control="+t+"&conversions_experiment="+n+"&samples_experiment="+r+"&function="+i;$.getJSON("api?"+s,function(e){$("span#linkembed").html("");$("div.resulting").html("");if(e.error)return!1;var t=s.replace("conversions_control","cc").replace("samples_control","sc").replace("conversions_experiment","ce").replace("samples_experiment","se").replace("function","fx");$('<input class="permalink" value="http://'+location.host+location.pathname+"?"+t+'&permalink=true" type="text">').appendTo("span#linkembed").show("#permalink,span#linkembed").focus();$("input[type=text].permalink").focus(function(){$(this).select()}).mouseup(function(e){e.preventDefault()});$("#linkinfo").html("Permalink to this test:");var n="<div class='chart confidence'><h2>Control performance</h2><img src='"+e.confidence.chart.control+"' class='chart-image' alt='"+roundNumber(e.confidence.results.control.high*100,1)+"%'/><div class='num'>"+roundNumber(e.confidence.results.control.low*100,1)+" - "+roundNumber(e.confidence.results.control.high*100,1)+"%</div></div>",r="<div class='chart confidence'><h2>Test performance</h2><img src='"+e.confidence.chart.experiment+"' class='chart-image' alt='"+roundNumber(e.confidence.results.experiment.high*100,1)+"%' /><div class='num'>"+roundNumber(e.confidence.results.experiment.low*100,1)+" - "+roundNumber(e.confidence.results.experiment.high*100,1)+"%</div></div>";$(n+r).appendTo(".confidence");var i="<div class='chart significance'><h2>Chance of outperformance</h2><img src='"+e.significance.chart+"' class='chart-image' alt='"+roundNumber(e.significance.results.experiment*100,1)+"%' /><div class='num'>"+roundNumber(e.significance.results.experiment*100,1)+"%</div></div>",o="<div class='chart improvement'><h2>Likely improvement</h2><img src='"+e.improvement.chart+"' class='chart-image' alt='"+roundNumber(e.improvement.results.high*100,1)+"%'/><div class='num'>"+roundNumber(e.improvement.results.low*100,1)+" - "+roundNumber(e.improvement.results.high*100,1)+"%</div></div>";$(i+o).appendTo(".improvement")});return!1});if(e("permalink")=="true"){$("input#con_con").val(e("cc"));$("input#con_sam").val(e("sc"));$("input#test_con").val(e("ce"));$("input#test_sam").val(e("se"));$(".button").click()}});